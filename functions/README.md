## Fitness-fatigue model functions (toolbox)

### Files

| Function        | File                | Type       | Description                                                                                                                                                                                                                                                                                                                                                                                  | Initial conditions         | Optimisation     | Cross-validation | Dependencies (CRAN)                                                                                   |
|-----------------|---------------------|------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|------------------|------------------|-------------------------------------------------------------------------------------------------------|
| standardModel() | [standardModel.R]() | Train/Test | Standard model <img src="https://latex.codecogs.com/svg.latex?\hat{p}(t)&space;=&space;p^*&space;&plus;&space;k_g&space;\sum_{i=1}^{n-1}\omega(i)(e^{\frac{-(n-i)}{\tau_g}})-k_h&space;\sum_{i=1}^{n-1}\omega(i)(e^{\frac{-(n-i)}{\tau_h}})" title="\hat{p}(t) = p^* + k_g \sum_{i=1}^{n-1}\omega(i)(e^{\frac{-(n-i)}{\tau_g}})-k_h \sum_{i=1}^{n-1}\omega(i)(e^{\frac{-(n-i)}{\tau_h}})" /> | Assumes g(0)=h(0)=0        | L-BFGS-B, or GA  | Expanding window | "caret", "GA", "truncnorm"                                                                            |
| banisterModel() | [banisterModel.R]() | Train/Test | Original system (Banister's model) of ODEs for fitness and fatigue with numerical solver (lsoda) and optimisation                                                                                                                                                                                                                                                                            | Estimates g(0), h(0)       | L-BFGS-B, or GA  | Expanding window | "caret", "GA", "deSolve", "truncnorm"                                                                 |
| turnerModel()   | [turnerModel.R]()   | Train/Test | Non-linear variant of original Banister system with numerical solver (lsoda) and optimisation                                                                                                                                                                                                                                                                                                | Estimates g(0), h(0)       | GA               | Expanding window | "caret", "GA", "deSolve", {"parallel", "foreach", "iterators", "doParallel", "doRNG"} (parallel only) |
| calvertModel()  | [calvertModel.R]()  | Train/Test | Standard model with fitness delay                                                                                                                                                                                                                                                                                                                                                            | Assumes g(0)=h(0)=0        | L-BFGS-B, or GA  | Expanding window |                                                                                                       |
| vdrModel        | [vdrModel.R]()      | Train/Test | Variable dose-response model                                                                                                                                                                                                                                                                                                                                                                 | Assumes g(0)=h(0)=0        | L-BFGS-B, or GA  | Expanding window |                                                                                                       |
| vdrHillModel    | [vdrHillModel.R]()  | Train/Test | Variable dose-response model with Hill transform on model input (Training load)                                                                                                                                                                                                                                                                                                              | Assumes g(0)=h(0)=0        |                  |                  |                                                                                                       |
| initCompModel() | [initCompModel.R]() | Train/Test | Train and test the initial component model with two-components (i.e. the standard FFM)                                                                                                                                                                                                                                                                                                       | Assumed within IC          | L-BFGS-B, or GA  | Expanding window |                                                                                                       |
| preloadModel()  | [preloadModel.R]()  | Train/Test | Train and test the pre-load model                                                                                                                                                                                                                                                                                                                                                            | Assumed within preload     | L-BFGS-B or GA   | Expanding window |                                                                                                       |
| parScaling()    | [parScaling.R]()    | Compute    | Computes average unit change in cost function for each parameter by iterating over a grid (1 free, n fixed) to determine conditioning and appropriate scaling values for the optimisation                                                                                                                                                                                                    | NA                         | NA               | NA               |                                                                                                       |
| computeModel()  | [computeModels.R]() | Compute    | Compute any of the models described above given definite parameters and TL time series                                                                                                                                                                                                                                                                                                       | Passed to fn as applicable | NA - computation | NA               |                                                                                                       |


### Documentation and data

- Provide authors code and documentation where appropriate
- Provide link to original research
- Provide link to example code file (.R) with data file link
- Provide link to text / markdown resource


| Function            | Description                                                                                                            | Associated documentation |
|---------------------|------------------------------------------------------------------------------------------------------------------------|--------------------------|
| [standardModel.R]() | Function to train and test the standard fitness-fatigue model in R using expanding-window CV. Assumes initial conditions of g(0)=h(0)=0 | TBC                      |
| [                   |                                                                                                                        |                          |

| File            | Description                                                                                       |
|-----------------|---------------------------------------------------------------------------------------------------|
| [standardModel.R](https://github.com/bsh2/Fitness-Fatigue-Model/blob/main/functions/standardModel.R) | Function to train and test the standard fitness-fatigue model in R (expanding window CV)          |
| [turnerModel.R](https://github.com/bsh2/Fitness-Fatigue-Model/blob/main/functions/turnerModel.R)   | Function to train and test the non-linear variant of  Banister's model in R (expanding window CV). See the original authors research paper [here](https://jim.turner.link/downloads/BHK-2017-0013.pdf), their C code repository [here](https://github.com/jturner314/nl_perf_model_opt) and their website [here](https://jim.turner.link/) |
| [functionTemplate.R](https://github.com/bsh2/Fitness-Fatigue-Models/blob/main/functions/functionTemplate.R)    | Template-by-annotation for various functions contained in this folder                   |